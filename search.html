<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Search — Enkyclo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:system-ui;background:#0f1220;color:#e6e8f0}
header{text-align:center;padding:60px 20px;border-bottom:1px solid #222653}
input{padding:14px;width:90%;max-width:520px;font-size:1rem;border-radius:8px;border:none}
main{max-width:860px;margin:auto;padding:40px 20px}
.result{padding:18px 0;border-bottom:1px solid #222653}
.result a{color:#4f6bff;font-size:1.2rem;text-decoration:none}
.message{color:#8c90b8;margin-top:30px}
</style>
</head>

<body>

<header>
  <h1>Search Enkyclo</h1>
  <input id="query" placeholder="Search topics…" autofocus>
</header>

<main id="results"></main>

<!-- THIS LINE IS CRITICAL -->
<script src="data/articles.js"></script>

<script>
const input = document.getElementById("query");
const results = document.getElementById("results");

function show(msg){
  results.innerHTML = `<p class="message">${msg}</p>`;
}

function search(){
  const q = input.value.trim().toLowerCase();
  results.innerHTML = "";

  if(!q){
    show("Type a topic to search.");
    return;
  }

  let found = false;

  for(const id in ARTICLES){
    const a = ARTICLES[id];
    const text = (a.title + " " + (a.keywords||[]).join(" ")).toLowerCase();

    if(text.includes(q)){
      found = true;
      results.innerHTML += `
        <div class="result">
          <a href="article.html?id=${id}">${a.title}</a>
        </div>`;
    }
  }

  if(!found){
    show(`No articles found for “${q}”.`);
  }
}

input.addEventListener("input", search);
show("Type a topic to search.");
</script>

</body>
</html>
